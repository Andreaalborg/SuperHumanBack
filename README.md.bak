# SuperHuman Backend

Backend API for SuperHuman - din personlige utviklingsapp!

## ğŸš€ Quick Start

### 1. Forutsetninger

Installer fÃ¸lgende programmer:
- **Node.js** (v18+): https://nodejs.org/
- **PostgreSQL** (v15+): https://www.postgresql.org/download/
- **pgAdmin 4** (valgfritt): Kommer med PostgreSQL

### 2. Database Setup

#### Alternativ A: Lokal PostgreSQL
1. Ã…pne pgAdmin eller psql
2. Opprett database:
```sql
CREATE DATABASE superhuman_db;
```

3. KjÃ¸r setup script:
```bash
psql -U postgres -d superhuman_db -f database/setup.sql
```

#### Alternativ B: Supabase (Gratis cloud)
1. GÃ¥ til https://supabase.com
2. Opprett nytt prosjekt
3. Kopier database URL til `.env`

### 3. Backend Setup

1. Installer dependencies:
```bash
npm install
```

2. Kopier og rediger `.env`:
```bash
cp .env.example .env
# Rediger .env med dine database credentials
```

3. Start serveren:
```bash
npm run dev
```

Backend kjÃ¸rer nÃ¥ pÃ¥ http://localhost:4000

### 4. Test API

Ã…pne http://localhost:4000/graphql for GraphQL Playground

#### Registrer bruker:
```graphql
mutation {
  register(input: {
    email: "test@test.com"
    password: "123456"
    name: "Test Bruker"
  }) {
    token
    user {
      id
      email
      name
    }
  }
}
```

#### Login:
```graphql
mutation {
  login(input: {
    email: "test@test.com"
    password: "123456"
  }) {
    token
    user {
      id
      email
    }
  }
}
```

#### Lagre aktivitet (krever auth token):
```graphql
mutation {
  saveActivity(input: {
    categoryId: "physical"
    name: "MorgenlÃ¸p"
    duration: 30
    points: 20
  }) {
    id
    name
    points
  }
}
```

Husk Ã¥ sette Authorization header:
```
Authorization: Bearer <din-token-her>
```

## ğŸ“ Prosjektstruktur

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/        # Konfigurasjon (database, auth, constants)
â”‚   â”œâ”€â”€ entities/      # TypeORM entities
â”‚   â”œâ”€â”€ graphql/       # GraphQL schema
â”‚   â”œâ”€â”€ middleware/    # Express middleware
â”‚   â”œâ”€â”€ resolvers/     # GraphQL resolvers
â”‚   â”œâ”€â”€ services/      # Business logic
â”‚   â””â”€â”€ utils/         # Hjelpefunksjoner
â”œâ”€â”€ database/          # SQL scripts
â”œâ”€â”€ .env              # MiljÃ¸variabler (ikke i git)
â””â”€â”€ package.json
```

## ğŸ”§ NPM Scripts

- `npm run dev` - Start i development mode med hot reload
- `npm run build` - Bygg for produksjon
- `npm start` - Start produksjonsserver
- `npm test` - KjÃ¸r tester

## ğŸŒŸ Features

### Implementert âœ…
- Brukerregistrering og innlogging (JWT)
- Aktivitetslogging med poeng
- Progresjonssporing per kategori
- Level-system med achievements
- Fleksibel datastruktur (JSONB)
- GraphQL API

### Kommer snart ğŸš§
- Sosiale features (venner, grupper)
- Push notifications
- AI anbefalinger
- Bildeupload
- Real-time updates

## ğŸ›¡ï¸ Sikkerhet

- Passord hashes med bcrypt
- JWT tokens for autentisering
- Rate limiting pÃ¥ API
- Input validering
- SQL injection beskyttelse

## ğŸ› Troubleshooting

### "Database connection failed"
- Sjekk at PostgreSQL kjÃ¸rer
- Verifiser credentials i `.env`
- Sjekk at database `superhuman_db` eksisterer

### "Cannot find module"
- KjÃ¸r `npm install` pÃ¥ nytt
- Slett `node_modules` og installer pÃ¥ nytt

### Port 4000 i bruk
- Endre PORT i `.env`
- Eller stopp annen prosess pÃ¥ port 4000

## ğŸ“ MiljÃ¸variabler

Se `.env.example` for alle tilgjengelige variabler.

Viktigste:
- `DB_PASSWORD` - PostgreSQL passord
- `JWT_SECRET` - Endre dette i produksjon!
- `FRONTEND_URL` - URL til frontend (for CORS)

## ğŸš€ Deployment

Se `/docs/deployment.md` for instruksjoner om deployment til:
- Railway
- Render
- Heroku
- VPS

## ğŸ“„ Lisens

Privat prosjekt - alle rettigheter forbeholdt.
